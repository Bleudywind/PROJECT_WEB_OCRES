'use strict';

var CliStatus = require('../models/cli-status');

module.exports = {
  buildProject: function buildProject(packageManager) {
    var directoryPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : process.cwd();
    return new Promise(function (resolve, reject) {
      var build = packageManager.build(directoryPath);
      build.on('error', function (error) {
        return reject(error);
      });
      build.on('exit', function (code) {
        return code === CliStatus.SUCCESS ? resolve({
          Status: code,
          Message: 'Success'
        }) : reject({
          Status: code,
          Message: 'Problem with project building'
        });
      });
    });
  }
};